# Setup MOTD

- name: Add /etc/motd
  when: 'linux_server_banner_motd_path is defined'
  copy:
    src: '{{ linux_server_banner_motd_path }}'
    dest: '/etc/motd'

- name: Remove /etc/motd
  when: 'linux_server_banner_motd_path is not defined'
  file:
    path: '/etc/motd'
    state: absent

- name: Remove /etc/issue
  file:
    path: '/etc/issue'
    state: absent

- name: Remove /etc/issue.net
  file:
    path: '/etc/issue.net'
    state: absent

- name: Install packages for DMOTD
  when: 'linux_server_banner_dmotd_enable'
  apt:
    name:
      - neofetch
      - lolcat

- name: Add logo for DMOTD
  when: 'linux_server_banner_dmotd_enable and linux_server_ascii_logo_path is defined'
  copy:
    src: '{{ linux_server_ascii_logo_path }}'
    dest: '/etc/logo'

- name: Add DMOTD script
  when: 'linux_server_banner_dmotd_enable'
  copy:
    src: 'dmotd.sh'
    dest: '/etc/profile.d/dmotd.sh'

- name: Remove DMOTD script
  when: 'not linux_server_banner_dmotd_enable'
  file:
    path: '/etc/profile.d/dmotd.sh'
    state: absent
